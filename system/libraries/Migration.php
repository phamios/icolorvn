<?php /*
Copyright (c) 2012 Appngon.com & Store8x.com
*/
${"\x47\x4cOBA\x4c\x53"}["t\x68\x68\x6a\x74\x75uz"]="\x66\x69\x6c\x65\x5f\x63\x6fu\x6e\x74";${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x6bvx\x6bq\x68\x6c\x73u\x7a\x66"]="\x66il\x65s";${"\x47\x4c\x4f\x42AL\x53"}["ixwp\x6cs\x74\x79\x69\x6a\x6c"]="\x6c\x61\x73t_\x6di\x67\x72\x61\x74\x69\x6fn";${"\x47\x4c\x4f\x42\x41LS"}["tn\x68s\x68\x62\x79\x79\x6f"]="ve\x72\x73\x69o\x6e";${"\x47\x4c\x4fB\x41\x4c\x53"}["\x65\x77v\x65\x66j\x66\x62m"]="meth\x6f\x64";${"G\x4c\x4f\x42\x41\x4cS"}["\x79\x70y\x76f\x63\x72h\x62\x63"]="\x63\x6c\x61ss";${"\x47LO\x42ALS"}["\x68\x69xe\x66y\x76\x76"]="\x6d\x69\x67ra\x74\x69\x6fns";${"\x47\x4c\x4f\x42\x41\x4cS"}["\x67\x66\x75s\x64\x61\x6ckf"]="n\x61m\x65";${"\x47\x4c\x4fB\x41\x4cS"}["\x76\x65\x73\x71\x6a\x7a\x67jg"]="\x66\x69\x6c\x65";${"\x47LO\x42\x41\x4cS"}["\x71f\x65\x79\x72c\x69\x6d\x6cdpj"]="\x69";${"\x47L\x4fBA\x4cS"}["lu\x75\x77\x66qy\x6d"]="f";${"\x47LO\x42A\x4c\x53"}["\x69z\x79\x66\x72\x73"]="\x73\x74\x61\x72\x74";${"\x47\x4cO\x42\x41\x4cS"}["\x70z\x62\x76e\x66"]="\x73\x74\x65p";${"G\x4c\x4fB\x41L\x53"}["i\x67\x63\x68\x6b\x72d\x67"]="\x63u\x72r\x65nt\x5f\x76\x65rs\x69\x6fn";${"\x47\x4c\x4fB\x41\x4cS"}["a\x62\x6b\x79t\x6bb\x6b"]="t\x61\x72\x67e\x74\x5fve\x72\x73\x69\x6f\x6e";${"G\x4c\x4f\x42\x41L\x53"}["\x63\x65c\x7a\x72\x71\x66pp\x6c\x71n"]="\x73\x74\x6f\x70";${"\x47\x4cO\x42\x41\x4c\x53"}["\x70\x69\x6abw\x73x\x76m\x74\x62"]="\x63\x6fn\x66i\x67";defined("B\x41\x53EP\x41T\x48")OR exit("No \x64i\x72\x65ct sc\x72i\x70\x74 a\x63\x63\x65\x73\x73\x20\x61\x6c\x6c\x6f\x77e\x64");class CI_Migration{protected$_migration_enabled=FALSE;protected$_migration_path=NULL;protected$_migration_version=0;protected$_error_string='';public function __construct($config=array()){${"G\x4c\x4fBA\x4c\x53"}["b\x67a\x66\x6d\x6c\x62"]="va\x6c";if(get_parent_class($this)!==FALSE){return;}${"\x47L\x4f\x42\x41\x4c\x53"}["\x65\x70q\x6f\x67g\x79\x77\x69\x66"]="\x6b\x65y";foreach(${${"\x47\x4c\x4fBA\x4cS"}["p\x69j\x62\x77\x73\x78v\x6dt\x62"]} as${${"\x47LOB\x41L\x53"}["e\x70\x71o\x67\x67\x79\x77\x69\x66"]}=>${${"\x47L\x4fB\x41\x4c\x53"}["\x62g\x61f\x6dlb"]}){$uucydiopckj="v\x61\x6c";$qhwlgfmuxf="\x6b\x65y";$this->{"\x5f".${$qhwlgfmuxf}}=${$uucydiopckj};}log_message("d\x65b\x75\x67","Mig\x72\x61\x74\x69\x6f\x6es\x20c\x6c\x61ss\x20ini\x74\x69\x61\x6c\x69\x7aed");if($this->_migration_enabled!==TRUE){show_error("Migra\x74\x69o\x6es \x68\x61\x73 \x62e\x65\x6e \x6coaded bu\x74\x20\x69\x73\x20\x64\x69\x73\x61\x62\x6c\x65\x64\x20\x6fr\x20set u\x70\x20i\x6ec\x6fr\x72e\x63\x74l\x79.");}$this->_migration_path==""OR$this->_migration_path=APPPATH."\x6di\x67r\x61t\x69\x6fns/";$this->_migration_path=rtrim($this->_migration_path,"/")."/";$this->lang->load("mi\x67\x72\x61t\x69\x6fn");$this->load->dbforge();if(!$this->db->table_exists("m\x69\x67rations")){$this->dbforge->add_field(array("\x76\x65r\x73io\x6e"=>array("type"=>"\x49\x4eT","co\x6e\x73\x74ra\x69\x6e\x74"=>3),));$this->dbforge->create_table("m\x69\x67\x72at\x69ons",TRUE);$this->db->insert("\x6d\x69\x67r\x61\x74\x69\x6f\x6e\x73",array("ve\x72s\x69o\x6e"=>0));}}public function version($target_version){$taewdo="\x73t\x6f\x70";$ryestslvv="\x69";${"\x47\x4cO\x42\x41\x4c\x53"}["\x62r\x67\x6dr\x69"]="\x63u\x72\x72\x65\x6e\x74_vers\x69o\x6e";$trnunsn="\x6d\x65th\x6fd";$pqsnqycs="i";${"\x47LO\x42\x41\x4c\x53"}["\x6f\x66\x72\x72mw\x6c\x77"]="\x6d\x69gr\x61\x74\x69\x6f\x6e";$rledtegwbv="\x73ta\x72\x74";${$rledtegwbv}=${${"G\x4c\x4f\x42\x41\x4c\x53"}["\x62r\x67\x6d\x72\x69"]}=$this->_get_version();$wseqfcdq="\x6d\x69g\x72\x61t\x69ons";${${"\x47L\x4fB\x41\x4cS"}["\x63\x65\x63\x7a\x72\x71fp\x70l\x71\x6e"]}=${${"G\x4c\x4f\x42\x41LS"}["\x61\x62k\x79t\x6bbk"]};${"\x47\x4cO\x42\x41LS"}["\x6e\x72\x73s\x6f\x72\x69jt"]="\x63\x75\x72\x72\x65n\x74_\x76\x65r\x73io\x6e";$gickpou="\x6de\x74h\x6f\x64";${"\x47L\x4f\x42\x41L\x53"}["u\x6av\x72\x65\x67\x70"]="\x73\x74e\x70";$mtxumk="i";${"\x47\x4c\x4f\x42A\x4cS"}["l\x68\x76z\x6adq\x73\x64\x74"]="\x73\x74\x65\x70";if(${${"\x47LO\x42\x41\x4cS"}["ab\x6b\x79t\x6bb\x6b"]}>${${"\x47LOB\x41L\x53"}["\x69g\x63\x68\x6b\x72\x64\x67"]}){$ilcfva="\x73t\x61r\x74";${"\x47LO\x42\x41\x4cS"}["\x72\x76tl\x77\x6dm"]="s\x74\x65\x70";++${$ilcfva};${"G\x4cOB\x41\x4cS"}["\x70v\x73\x76\x73x\x7a\x74\x6bu\x6d"]="\x73\x74o\x70";++${${"\x47L\x4f\x42\x41\x4c\x53"}["\x70\x76s\x76sx\x7a\x74k\x75m"]};${${"\x47L\x4fBALS"}["r\x76\x74\x6cw\x6d\x6d"]}=1;}else{${${"G\x4cOB\x41\x4c\x53"}["\x70\x7ab\x76\x65f"]}=-1;}${"\x47\x4cOB\x41\x4cS"}["d\x72\x6f\x78\x62o\x68\x69f\x62p"]="\x63\x75\x72\x72ent_\x76\x65\x72s\x69o\x6e";${$gickpou}=${${"G\x4c\x4fBAL\x53"}["\x75j\x76\x72egp"]}===1?"\x75\x70":"do\x77n";$sroasowztclg="\x76\x65rsi\x6fn";${$wseqfcdq}=array();for(${$ryestslvv}=${${"G\x4c\x4fB\x41\x4cS"}["\x69z\x79\x66\x72\x73"]};${$mtxumk}!=${$taewdo};${$pqsnqycs}+=${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x70\x7ab\x76\x65\x66"]}){$ykhrebfidjnc="\x66";${"G\x4c\x4f\x42\x41L\x53"}["\x70jz\x79dsl\x63z"]="\x6ea\x6d\x65";$ilqsqebtot="\x69";${${"\x47\x4cO\x42\x41\x4c\x53"}["\x6c\x75uwfq\x79m"]}=glob(sprintf($this->_migration_path."%\x30\x33\x64_*.\x70\x68\x70",${$ilqsqebtot}));$fuwejdsiwe="f";if(count(${${"\x47L\x4f\x42\x41\x4c\x53"}["\x6c\x75u\x77\x66\x71\x79m"]})>1){$this->_error_string=sprintf($this->lang->line("m\x69\x67r\x61\x74i\x6fn\x5fm\x75l\x74\x69ple\x5f\x76e\x72\x73\x69o\x6e"),${${"\x47\x4c\x4f\x42A\x4c\x53"}["\x71\x66\x65\x79r\x63iml\x64\x70\x6a"]});return FALSE;}if(count(${$ykhrebfidjnc})==0){$icrthwfdcqv="i";if(${${"\x47\x4c\x4fBAL\x53"}["\x70\x7a\x62\x76e\x66"]}==1){break;}$this->_error_string=sprintf($this->lang->line("mi\x67\x72\x61\x74\x69on_\x6eot\x5f\x66o\x75nd"),${$icrthwfdcqv});return FALSE;}${${"\x47L\x4fB\x41\x4c\x53"}["\x76e\x73\x71\x6a\x7a\x67jg"]}=basename(${$fuwejdsiwe}[0]);${"\x47\x4cOB\x41\x4cS"}["\x72\x70\x6d\x77\x67\x74w\x6b"]="\x6d\x61\x74c\x68";${${"\x47L\x4f\x42\x41\x4cS"}["\x67\x66\x75\x73\x64\x61\x6c\x6b\x66"]}=basename(${${"\x47\x4cO\x42\x41\x4c\x53"}["\x6c\x75\x75w\x66q\x79m"]}[0],"\x2e\x70h\x70");if(preg_match("/^\x5c\x64{\x33}_(\\\x77+)\$/",${${"\x47\x4c\x4fBA\x4c\x53"}["\x70\x6a\x7a\x79\x64\x73\x6c\x63z"]},${${"\x47\x4c\x4fB\x41L\x53"}["\x72\x70mwg\x74\x77\x6b"]})){$lnbqxffevf="\x6da\x74\x63h";${"G\x4c\x4fBA\x4c\x53"}["c\x65\x74bb\x61\x69\x76o"]="\x66";$sijwxpassww="\x6dat\x63\x68";$gmgwxc="\x6d\x61\x74\x63h";${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x69p\x77\x63g\x79\x6c"]="\x6d\x61\x74\x63\x68";${$gmgwxc}[1]=strtolower(${$lnbqxffevf}[1]);$ohfjqrtfc="m\x61tch";if(in_array(${$ohfjqrtfc}[1],${${"G\x4c\x4fB\x41\x4cS"}["\x68\x69\x78e\x66\x79\x76\x76"]})){${"G\x4cO\x42\x41L\x53"}["\x63\x68\x77\x62\x79\x77\x6a\x62v\x66"]="\x6da\x74\x63\x68";$this->_error_string=sprintf($this->lang->line("m\x69\x67ra\x74io\x6e\x5fm\x75\x6ctip\x6c\x65_\x76ersi\x6f\x6e"),${${"\x47\x4cO\x42\x41L\x53"}["\x63hw\x62\x79w\x6a\x62\x76\x66"]}[1]);return FALSE;}include${${"\x47\x4c\x4f\x42A\x4c\x53"}["c\x65t\x62\x62\x61iv\x6f"]}[0];${${"G\x4c\x4fB\x41LS"}["y\x70\x79\x76\x66\x63\x72hbc"]}="Mig\x72a\x74i\x6f\x6e_".ucfirst(${${"GL\x4f\x42\x41LS"}["i\x70w\x63\x67\x79\x6c"]}[1]);if(!class_exists(${${"G\x4c\x4f\x42\x41L\x53"}["\x79\x70\x79vfc\x72h\x62\x63"]})){$this->_error_string=sprintf($this->lang->line("\x6d\x69\x67r\x61\x74i\x6fn_cl\x61\x73\x73\x5f\x64\x6f\x65\x73\x6e\x74\x5f\x65x\x69st"),${${"\x47LO\x42\x41\x4cS"}["\x79\x70\x79\x76\x66\x63\x72\x68\x62\x63"]});return FALSE;}if(!is_callable(array(${${"\x47\x4cO\x42A\x4c\x53"}["yp\x79v\x66\x63r\x68\x62c"]},${${"G\x4cO\x42A\x4c\x53"}["ewv\x65\x66\x6a\x66\x62m"]}))){${"\x47L\x4f\x42\x41\x4c\x53"}["gz\x68jk\x6asq\x6a"]="\x6d\x65\x74\x68\x6f\x64";$this->_error_string=sprintf($this->lang->line("\x6d\x69g\x72\x61\x74\x69o\x6e_\x6d\x69s\x73in\x67_".${${"G\x4c\x4f\x42A\x4cS"}["g\x7ah\x6a\x6b\x6a\x73\x71\x6a"]}."\x5fme\x74\x68od"),${${"\x47\x4c\x4fB\x41\x4cS"}["\x79pyv\x66\x63rh\x62c"]});return FALSE;}${${"\x47\x4cOBA\x4cS"}["\x68i\x78ef\x79v\x76"]}[]=${$sijwxpassww}[1];}else{$this->_error_string=sprintf($this->lang->line("mi\x67\x72\x61t\x69on\x5finval\x69\x64_filena\x6d\x65"),${${"\x47L\x4f\x42A\x4cS"}["\x76\x65\x73\x71j\x7a\x67j\x67"]});return FALSE;}}log_message("\x64e\x62\x75g","\x43\x75\x72\x72en\x74 m\x69g\x72\x61\x74\x69o\x6e: ".${${"\x47LOBAL\x53"}["dr\x6f\x78\x62\x6f\x68i\x66\x62\x70"]});${$sroasowztclg}=${${"\x47L\x4fB\x41\x4c\x53"}["\x71f\x65y\x72\x63im\x6c\x64\x70\x6a"]}+(${${"\x47L\x4fB\x41\x4c\x53"}["\x6c\x68v\x7a\x6a\x64q\x73\x64t"]}==1?-1:0);if(${${"\x47L\x4fB\x41LS"}["\x68\x69\x78ef\x79\x76\x76"]}===array()){return TRUE;}log_message("d\x65\x62\x75\x67","\x4d\x69g\x72\x61\x74\x69\x6e\x67\x20\x66ro\x6d ".${$trnunsn}." \x74\x6f v\x65\x72si\x6f\x6e ".${${"GL\x4f\x42\x41\x4cS"}["\x74\x6e\x68s\x68\x62y\x79o"]});foreach(${${"\x47L\x4f\x42\x41\x4c\x53"}["h\x69\x78\x65f\x79\x76\x76"]} AS${${"\x47L\x4f\x42\x41\x4c\x53"}["\x6f\x66\x72rm\x77\x6c\x77"]}){${"G\x4c\x4fB\x41\x4c\x53"}["\x6dqj\x79rl\x75dyd\x6e"]="\x6d\x69\x67r\x61ti\x6fn";${${"G\x4cOB\x41\x4cS"}["\x79\x70\x79\x76\x66\x63\x72\x68\x62c"]}="M\x69gr\x61t\x69on\x5f".ucfirst(strtolower(${${"\x47L\x4fB\x41L\x53"}["m\x71j\x79\x72\x6c\x75\x64\x79d\x6e"]}));$htrnqy="\x63\x75\x72\x72\x65\x6e\x74\x5f\x76\x65\x72\x73\x69\x6f\x6e";${"\x47LO\x42\x41\x4c\x53"}["\x6fo\x62\x6b\x74c\x69\x74w\x74f"]="st\x65\x70";$ipjsjfdimhb="c\x6c\x61\x73\x73";call_user_func(array(new${$ipjsjfdimhb},${${"\x47LO\x42\x41L\x53"}["\x65\x77v\x65\x66\x6a\x66b\x6d"]}));${$htrnqy}+=${${"\x47\x4cO\x42AL\x53"}["\x6f\x6f\x62\x6b\x74\x63\x69tw\x74\x66"]};$this->_update_version(${${"\x47\x4c\x4fB\x41\x4c\x53"}["\x69\x67ch\x6b\x72\x64g"]});}log_message("d\x65b\x75g","\x46\x69n\x69\x73h\x65d\x20\x6d\x69gra\x74ing\x20t\x6f ".${${"G\x4c\x4f\x42A\x4cS"}["n\x72ssor\x69j\x74"]});return${${"GL\x4f\x42\x41LS"}["igch\x6b\x72\x64\x67"]};}public function latest(){${"\x47\x4cO\x42\x41L\x53"}["\x6d\x66\x74\x65\x62r\x61\x78\x6b\x74\x78"]="\x6dig\x72at\x69o\x6es";$fqpqytenri="\x6d\x69\x67r\x61t\x69\x6f\x6e\x73";if(!${${"\x47\x4c\x4f\x42\x41\x4cS"}["\x6d\x66t\x65\x62\x72\x61\x78\x6b\x74\x78"]}=$this->find_migrations()){$this->_error_string=$this->line->lang("mig\x72at\x69o\x6e_n\x6f\x6ee_f\x6fun\x64");return false;}${${"GLOB\x41L\x53"}["\x69\x78wpls\x74yijl"]}=basename(end(${$fqpqytenri}));return$this->version((int)substr(${${"\x47LOBALS"}["i\x78w\x70ls\x74\x79\x69\x6al"]},0,3));}public function current(){return$this->version($this->_migration_version);}public function error_string(){return$this->_error_string;}protected function find_migrations(){${"\x47\x4c\x4fB\x41\x4cS"}["c\x61rnkm\x78\x72\x67i"]="\x66\x69\x6c\x65_\x63\x6funt";${${"\x47\x4c\x4f\x42A\x4cS"}["\x6bv\x78\x6b\x71h\x6c\x73\x75\x7af"]}=glob($this->_migration_path."*_*.p\x68p");$jemdowneunp="f\x69\x6c\x65\x73";$ussyvbmv="\x69";${${"\x47LOB\x41\x4c\x53"}["\x74\x68\x68j\x74\x75u\x7a"]}=count(${$jemdowneunp});for(${$ussyvbmv}=0;${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x71\x66\x65\x79r\x63\x69\x6dl\x64pj"]}<${${"\x47\x4cOB\x41LS"}["c\x61\x72n\x6b\x6dx\x72\x67i"]};${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["q\x66\x65y\x72\x63i\x6d\x6cd\x70j"]}++){$mdbbvojz="i";${"\x47\x4c\x4fBA\x4cS"}["\x69f\x75\x76\x68\x74c\x78d"]="\x66\x69\x6c\x65\x73";$ijqbbyhqix="\x6e\x61m\x65";${$ijqbbyhqix}=basename(${${"\x47L\x4f\x42\x41\x4cS"}["if\x75\x76\x68t\x63\x78\x64"]}[${$mdbbvojz}],"\x2ephp");if(!preg_match("/^\x5cd{3}_(\x5cw+)\$/",${${"\x47\x4c\x4f\x42A\x4c\x53"}["g\x66\x75\x73\x64al\x6bf"]})){${${"\x47\x4c\x4fB\x41\x4c\x53"}["\x6bv\x78\x6b\x71\x68\x6c\x73\x75z\x66"]}[${${"\x47\x4cO\x42\x41\x4c\x53"}["\x71\x66\x65\x79r\x63\x69\x6d\x6cd\x70\x6a"]}]=FALSE;}}sort(${${"\x47\x4c\x4fBA\x4c\x53"}["kv\x78\x6bqhl\x73u\x7af"]});return${${"G\x4c\x4fB\x41L\x53"}["k\x76\x78\x6b\x71h\x6c\x73uz\x66"]};}protected function _get_version(){${"\x47\x4cO\x42\x41\x4cS"}["\x6cap\x61t\x76\x73\x6fp\x63"]="r\x6f\x77";$todnxmhwjewp="r\x6fw";${${"\x47\x4cOBA\x4c\x53"}["\x6ca\x70\x61\x74\x76\x73\x6fp\x63"]}=$this->db->get("m\x69\x67\x72a\x74\x69\x6fn\x73")->row();return${$todnxmhwjewp}?$row->version:0;}protected function _update_version($migrations){${"G\x4c\x4fB\x41L\x53"}["sd\x65\x64\x6ci"]="\x6di\x67\x72a\x74\x69\x6fn\x73";return$this->db->update("\x6d\x69gr\x61\x74i\x6f\x6es",array("\x76ers\x69\x6fn"=>${${"G\x4cO\x42\x41LS"}["\x73\x64ed\x6ci"]}));}public function __get($var){$obszxxscqx="\x76a\x72";return get_instance()->${$obszxxscqx};}}
?>